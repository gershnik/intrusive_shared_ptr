#
# Copyright 2004 Eugene Gershnik
#
# Use of this source code is governed by a BSD-style
# license that can be found in the LICENSE file or at
# https://github.com/gershnik/intrusive_shared_ptr/blob/master/LICENSE.txt
#

@PACKAGE_INIT@


# Avoid repeatedly including the targets
if(NOT TARGET isptr::isptr)
    include(${CMAKE_CURRENT_LIST_DIR}/isptr-exports.cmake)

    get_filename_component(IMPORT_PREFIX "${CMAKE_CURRENT_LIST_FILE}" PATH)
    get_filename_component(IMPORT_PREFIX "${IMPORT_PREFIX}" PATH)
    get_filename_component(IMPORT_PREFIX "${IMPORT_PREFIX}" PATH)
    if(_IMPORT_PREFIX STREQUAL "/")
      set(IMPORT_PREFIX "")
    endif()

    set(ISPTR_MODULES_BASE_DIRS "${IMPORT_PREFIX}/include/intrusive_shared_ptr")
    set(ISPTR_MODULES_FILES "${IMPORT_PREFIX}/include/intrusive_shared_ptr/isptr.cppm")

    function(isptr_add_module target_name visibility)
        target_sources(${target_name} ${visibility}
            FILE_SET isptr_module TYPE CXX_MODULES BASE_DIRS ${ISPTR_MODULES_BASE_DIRS} FILES ${ISPTR_MODULES_FILES}
        )
    endfunction()

    set(IMPORT_PREFIX)

endif()


